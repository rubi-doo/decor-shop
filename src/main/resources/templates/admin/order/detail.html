<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/admin-layout}">

<div layout:fragment="content" class="container mt-4">

	<h2>
		Chi ti·∫øt ƒë∆°n h√†ng #<span th:text="${order.id}"></span>
	</h2>

	<!-- Th√¥ng tin chung -->
	<div class="row mt-3">
		<div class="col-md-6">
			<p>
				<strong>Kh√°ch h√†ng:</strong> <span th:text="${order.user.name}"></span>
			</p>
			<p>
				<strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span th:text="${order.user.phone}"></span>
			</p>
			<p>
				<strong>Email:</strong> <span th:text="${order.user.email}"></span>
			</p>
			<p>
				<strong>ƒê·ªãa ch·ªâ:</strong> <span th:text="${order.address}"></span>
			</p>
		</div>
		<div class="col-md-6">
			<p>
				<strong>Ng√†y ƒë·∫∑t:</strong> <span
					th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy HH:mm')}"></span>
			</p>
			<p>
				<strong>Ph∆∞∆°ng th·ª©c TT:</strong> <span
					th:text="${order.paymentMethod}"></span>
			</p>
			<p>
				<strong>Tr·∫°ng th√°i thanh to√°n:</strong> <span
					class="badge bg-secondary" th:text="${order.paymentStatus}"></span>
			</p>
			<p>
				<strong>Tr·∫°ng th√°i ƒë∆°n:</strong> <span class="badge bg-secondary"
					th:text="${order.status}"></span>
			</p>
		</div>
	</div>

	<!-- Ghi ch√∫ -->
	<div class="mt-3">
		<p>
			<strong>Ghi ch√∫:</strong>
		</p>
		<p th:text="${order.note} ?: 'Kh√¥ng c√≥ ghi ch√∫'"></p>
	</div>

	<!-- Danh s√°ch s·∫£n ph·∫©m -->
	<h4 class="mt-4">üìã Danh s√°ch s·∫£n ph·∫©m</h4>
	<table class="table table-bordered mt-2">
		<thead class="table-light text-center">
			<tr>
				<th>#</th>
				<th>S·∫£n ph·∫©m</th>
				<th>H√¨nh ·∫£nh</th>
				<th>Gi√°</th>
				<th>S·ªë l∆∞·ª£ng</th>
				<th>Th√†nh ti·ªÅn</th>
			</tr>
		</thead>
		<tbody th:each="item, stat : ${order.orderDetails}"
			class="text-center">
			<tr>
				<td th:text="${stat.index + 1}"></td>
				<td th:text="${item.product.name}"></td>
				<td><img th:src="@{'/uploads/' + ${item.product.imageUrl}}"
					onerror="this.onerror=null; this.src='/images/default.png';"
					th:attr="alt=${item.product.name}" class="rounded"
					style="width: 45px; height: 45px; object-fit: cover;" /></td>

				<td
					th:text="${#numbers.formatDecimal(item.price, 0, 'POINT', 0, 'COMMA')} + ' ƒë'"></td>
				<td th:text="${item.quantity}"></td>
				<td
					th:text="${#numbers.formatDecimal(item.price * item.quantity, 0, 'POINT', 0, 'COMMA')} + ' ƒë'"></td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<th colspan="5" class="text-center text-end text-uppercase">T·ªïng
					c·ªông:</th>
				<th
					th:text="${#numbers.formatDecimal(totalAmount, 0, 'POINT', 0, 'COMMA')} + ' ƒë'"
					class="text-center text-danger fw-bold"></th>
			</tr>
		</tfoot>

	</table>

	<div class="mt-3">
		<a th:href="@{/admin/orders}" class="btn btn-secondary">‚¨Ö Quay l·∫°i
			danh s√°ch</a>
	</div>

</div>
</html>
